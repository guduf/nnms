{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "#config",
  "type": "object",
  "properties": {
    "app": {
      "type": "string",
      "description": "name of the application"
    },
    "root": {
      "type": "string",
      "description": "directory used to resolve relative paths",
      "default": "."
    },
    "dist": {
      "type": "string",
      "description": "directory used to require modules",
      "default": "./dist"
    },
    "container": {
      "properties": {
        "logServer": {
          "type": ["object", "null"],
          "properties": {
            "host": {
              "type": "string",
              "description": "host of websocket server"
            },
            "port": {
              "type": "number",
              "description": "port of websocket server"
            }
          }
        },
        "logFormat": {
          "type": ["object", "null"],
          "properties": {
            "printData": {
              "type": "boolean",
              "description": "Whether the data of the log should be displayed"
            },
            "printDate": {
              "type": "boolean",
              "description": "Whether the date of the log should be displayed"
            },
            "tags": {
              "type": "string",
              "description": "If 'src' then only tag with 'src' or '[src]' as key will be displayed.",
              "enum": ["all", "src"]
            }
          }
        }
      }
    },
    "sources": {
      "type": "array",
      "description": "file paths of the typescript file exporting modules.",
      "items": {"type": "string"},
      "default": ["./src/index.ts"]
    },
    "tsConfig": {
      "type": "string",
      "description": "file path of the typescript file exporting modules.",
      "default": "./tsconfig.json"
    },
    "externals": {
      "type": "array",
      "description": "modules that should not be included in the bundle",
      "default": []
    },
    "$aot": {
      "type": "object",
      "required": ["modules"],
      "properties": {
        "modules": {
          "type": "object",
          "patternProperties": {"^[\\w-]+$": {"$ref": "#/definitions/module-info"}},
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": true,
  "definitions": {
    "resource-info": {
      "type": "object",
      "required": ["name", "vars", "providers"],
      "properties": {
        "name": {"type": "string"},
        "vars": {"type": "object"},
        "providers:": {"type": "array", "items": {"$ref": "#/definitions/resource-info"}}
      }
    },
    "module-info": {
      "allOf": [
        {"$ref": "#/definitions/resource-info"},
        {
          "properties": {
            "path": {"type": "string"},
            "plugins": {"type": "array", "items": {"$ref": "#/definitions/resource-info"}}
          },
          "required": ["path", "plugins"]
        }
      ]
    }
  }
}
